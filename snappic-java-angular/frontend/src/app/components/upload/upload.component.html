<div class="container">
  <header>
    <h1>ðŸ“¸ SnapPic</h1>
    <p class="subtitle">Share your moment</p>
  </header>

  <main>
    <form (ngSubmit)="uploadImage()">
      <div class="upload-section">
        <div class="image-preview">
          <div class="preview-placeholder" *ngIf="!previewUrl">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path>
              <circle cx="12" cy="13" r="4"></circle>
            </svg>
            <p>Take or select a photo</p>
          </div>
          <img [src]="previewUrl" *ngIf="previewUrl" alt="Preview" class="preview-image">
        </div>

        <div class="button-group">
          <label for="cameraInput" class="btn btn-primary">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path>
              <circle cx="12" cy="13" r="4"></circle>
            </svg>
            Take Photo
          </label>
          <input type="file" id="cameraInput" (change)="onCameraCapture($event)" 
                 accept="image/jpeg,image/png,image/webp" capture="environment" style="display: none;">

          <label for="galleryInput" class="btn btn-secondary">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
              <circle cx="8.5" cy="8.5" r="1.5"></circle>
              <polyline points="21 15 16 10 5 21"></polyline>
            </svg>
            Choose from Gallery
          </label>
          <input type="file" id="galleryInput" (change)="onFileSelected($event)" 
                 accept="image/jpeg,image/png,image/webp" style="display: none;">
        </div>
      </div>

      <div class="form-group">
        <label for="comment">Comment (max 100 characters)</label>
        <input type="text" id="comment" [(ngModel)]="comment" maxlength="100" 
               placeholder="Add a short comment...">
        <span class="char-count">{{ characterCount }}/100</span>
      </div>

      <button type="submit" class="btn btn-upload" [disabled]="isUploading">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
          <polyline points="17 8 12 3 7 8"></polyline>
          <line x1="12" y1="3" x2="12" y2="15"></line>
        </svg>
        {{ isUploading ? 'Uploading...' : 'Upload Image' }}
      </button>
    </form>

    <div class="message" *ngIf="message" [class]="messageType">
      {{ message }}
    </div>

    <div class="loading" *ngIf="isUploading">
      <div class="spinner"></div>
      <p>Uploading...</p>
    </div>
  </main>

  <footer>
    <button class="btn btn-link" (click)="navigateToGallery()">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect>
        <line x1="7" y1="2" x2="7" y2="22"></line>
        <line x1="17" y1="2" x2="17" y2="22"></line>
        <line x1="2" y1="12" x2="22" y2="12"></line>
        <line x1="2" y1="7" x2="7" y2="7"></line>
        <line x1="2" y1="17" x2="7" y2="17"></line>
        <line x1="17" y1="17" x2="22" y2="17"></line>
        <line x1="17" y1="7" x2="22" y2="7"></line>
      </svg>
      View Gallery
    </button>
  </footer>
</div>